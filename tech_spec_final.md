# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –î–µ—Ç–µ–∫—Ç–æ—Ä –∞–Ω–æ–º–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–º–æ–≤ —Ç–æ—Ä–≥–æ–≤ (–§–ò–ù–ê–õ–¨–ù–ê–Ø –í–ï–†–°–ò–Ø)

## üéØ –¶–µ–ª—å
–°–∫—Ä–∏–ø—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ–±—ä–µ–º—ã —Ç–æ—Ä–≥–æ–≤ –ø–æ –∞–∫—Ü–∏—è–º –ú–æ—Å–±–∏—Ä–∂–∏ –∏ –≤—ã—è–≤–ª—è–µ—Ç –∞–Ω–æ–º–∞–ª—å–Ω–æ –≤—ã—Å–æ–∫–∏–µ –æ–±—ä–µ–º—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.

## üìã –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã
1. **–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:** –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ JSON —Ñ–∞–π–ª–∞—Ö (1 –¥–∞—Ç–∞ = 1 —Ñ–∞–π–ª)
2. **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫:** –°–æ–±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 60 –¥–Ω–µ–π –¥–ª—è –±—ç–∫—Ç–µ—Å—Ç–∞
3. **–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞:** –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞ –≤—á–µ—Ä–∞—à–Ω–∏–π –¥–µ–Ω—å, –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç—á–µ—Ç
4. **–†–∞—Å—á–µ—Ç –∞–Ω–æ–º–∞–ª–∏–π:** 
   - –í–∑—è—Ç—å —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∞—Ç—É –∞–Ω–∞–ª–∏–∑–∞
   - –í—ã—á–∏—Å–ª–∏—Ç—å —Å—Ä–µ–¥–Ω–µ–µ VALUE –∑–∞ 5 –¥–Ω–µ–π –î–û —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∞—Ç—ã
   - –°—Ä–∞–≤–Ω–∏—Ç—å VALUE —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∞—Ç—ã —Å–æ —Å—Ä–µ–¥–Ω–∏–º
   - –ï—Å–ª–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ > 2œÉ ‚Üí –∞–Ω–æ–º–∞–ª–∏—è

### –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞
```
–°–µ–≥–æ–¥–Ω—è: 03.02.2026
–ó–∞–ø—É—Å–∫–∞–µ–º: python detector.py --date 2026-02-02

–†–∞—Å—á–µ—Ç –¥–ª—è –¥–∞—Ç—ã: 02.02.2026
–ë–∞–∑–∞ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: 28.01-01.02 (5 –¥–Ω–µ–π)

–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–∫–µ—Ä–∞:
  - –°—Ä–µ–¥–Ω–∏–π VALUE –∑–∞ 28.01-01.02 = Œº
  - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ = œÉ
  - VALUE –Ω–∞ 02.02.2026 = X
  - Z-score = (X - Œº) / œÉ
  - –ï—Å–ª–∏ Z > 2.0 ‚Üí –ê–ù–û–ú–ê–õ–ò–Ø
```

## ‚úÖ –°–û–ì–õ–ê–°–û–í–ê–ù–ù–´–ï –ü–ê–†–ê–ú–ï–¢–†–´

### 1. –ü–µ—Ä–∏–æ–¥ –¥–∞–Ω–Ω—ã—Ö
- **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä:** 60 –¥–Ω–µ–π (–¥–ª—è –±—ç–∫—Ç–µ—Å—Ç–∞ –∏ –ø–µ—Ä–≤—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤)
- **–ë–∞–∑–∞ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –∞–Ω–æ–º–∞–ª–∏–π:** 5 –¥–Ω–µ–π –¥–æ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∞—Ç—ã
- **–¶–µ–ª–µ–≤–∞—è –¥–∞—Ç–∞:** —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

### 2. –ú–µ—Ç—Ä–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞
- **VALUE** (–æ–±–æ—Ä–æ—Ç –≤ —Ä—É–±–ª—è—Ö)
- –°—É–º–º–∏—Ä–æ–≤–∞—Ç—å –ø–æ –≤—Å–µ–º —Ä–µ–∂–∏–º–∞–º —Ç–æ—Ä–≥–æ–≤ (–µ—Å–ª–∏ —Ç–∏–∫–µ—Ä –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑)

### 3. –ü–æ—Ä–æ–≥ –∞–Ω–æ–º–∞–ª–∏–∏
```python
ANOMALY_THRESHOLD_SIGMA = 2.0  # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤ –Ω–∞—á–∞–ª–µ —Å–∫—Ä–∏–ø—Ç–∞
```

### 4. –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª–∏–π
- –¢–æ–ª—å–∫–æ **–≤—ã—Å–æ–∫–∏–µ –æ–±—ä–µ–º—ã** (–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –∞–Ω–æ–º–∞–ª–∏–∏)
- –£—Å–ª–æ–≤–∏–µ: `z_score > ANOMALY_THRESHOLD_SIGMA`

### 5. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–∏–∫–µ—Ä–æ–≤
- **–ù–ï–¢ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏**
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≤—Å–µ —Ç–∏–∫–µ—Ä—ã –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –¥—É–±–ª–∏: —Å—É–º–º–∏—Ä—É–µ–º VALUE –ø–æ —Ç–∏–∫–µ—Ä—É

### 6. –§–æ—Ä–º–∞—Ç –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **TXT** - —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–π –æ—Ç—á–µ—Ç
- **JSON** - –º–∞—à–∏–Ω–æ—á–∏—Ç–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç

### 7. –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
```
data/
  ‚îú‚îÄ‚îÄ volumes_2026-01-01.json
  ‚îú‚îÄ‚îÄ volumes_2026-01-02.json
  ‚îú‚îÄ‚îÄ volumes_2026-01-03.json
  ‚îî‚îÄ‚îÄ ...
```
**–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞:**
```json
{
  "date": "2026-01-31",
  "tickers": {
    "SBER": {
      "shortname": "–°–±–µ—Ä–±–∞–Ω–∫",
      "volume": 150500000,
      "value": 4500000000.5,
      "numtrades": 35000
    },
    ...
  }
}
```

### 8. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö:**
```
–°–ª—É—á–∞–π: –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º 5 –¥–Ω–µ–π, –Ω–æ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ 3
–†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–µ—é—â–∏–µ—Å—è –¥–∞–Ω–Ω—ã–µ, –¥–æ–±–∞–≤–∏—Ç—å warning –≤ –æ—Ç—á–µ—Ç
```

**API –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É:**
```python
# –ü–æ–≤—Ç–æ—Ä 5 —Ä–∞–∑ —Å –ø–∞—É–∑–æ–π –≤ 60 —Å–µ–∫—É–Ω–¥
MAX_RETRIES = 5
RETRY_DELAY = 60  # —Å–µ–∫—É–Ω–¥

# –ï—Å–ª–∏ –≤—Å–µ 5 –ø–æ–ø—ã—Ç–æ–∫ –Ω–µ—É–¥–∞—á–Ω—ã ‚Üí –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç —Å –æ—à–∏–±–∫–æ–π
```

**–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ –¥–∞—Ç—É (–≤—ã—Ö–æ–¥–Ω–æ–π):**
```
–†–µ—à–µ–Ω–∏–µ: –≤—ã–≤–µ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ, —á—Ç–æ –∑–∞ –¥–∞—Ç—É –Ω–µ—Ç —Ç–æ—Ä–≥–æ–≤
```

### 9. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä:**
```
requests  # –î–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
```

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã —Ä–∞—Å—á–µ—Ç—ã –±–µ–∑ pandas):**
```python
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É Python
import statistics  # –î–ª—è mean, stdev
import json
import datetime
```

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
moex_volume_detector/
‚îÇ
‚îú‚îÄ‚îÄ detector.py              # –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
‚îÇ
‚îú‚îÄ‚îÄ data/                    # –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
‚îÇ   ‚îú‚îÄ‚îÄ volumes_2026-01-01.json
‚îÇ   ‚îú‚îÄ‚îÄ volumes_2026-01-02.json
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ reports/                 # –û—Ç—á–µ—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ anomalies_2026-01-31.txt
‚îÇ   ‚îú‚îÄ‚îÄ anomalies_2026-01-31.json
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îî‚îÄ‚îÄ requirements.txt         # requests
```

## üîß –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

### –ó–∞–ø—É—Å–∫ —Å –¥–∞—Ç–æ–π
```bash
python detector.py --date 2026-01-31
```

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ (—Å–±–æ—Ä 60 –¥–Ω–µ–π)
```bash
python detector.py --init --days 60
```

### –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∑–∞–ø—É—Å–∫ (–≤—á–µ—Ä–∞—à–Ω–∏–π –¥–µ–Ω—å)
```bash
python detector.py --date yesterday
# –∏–ª–∏
python detector.py --date 2026-02-02
```

## üìä –§–æ—Ä–º–∞—Ç –æ—Ç—á–µ—Ç–æ–≤

### TXT –æ—Ç—á–µ—Ç (reports/anomalies_2026-01-31.txt)
```
===============================================
–ê–ù–û–ú–ê–õ–ò–ò –û–ë–™–ï–ú–û–í –¢–û–†–ì–û–í
–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞: 31.01.2026
–ë–∞–∑–æ–≤—ã–π –ø–µ—Ä–∏–æ–¥: 26.01 - 30.01.2026 (5 –¥–Ω–µ–π)
–ü–æ—Ä–æ–≥ –∞–Ω–æ–º–∞–ª–∏–∏: 2.0œÉ
===============================================

–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –∞–Ω–æ–º–∞–ª–∏–π: 12

[1] SBER - –°–±–µ—Ä–±–∞–Ω–∫
    –û–±–æ—Ä–æ—Ç: 4,500.5 –º–ª–Ω —Ä—É–±
    –°—Ä–µ–¥–Ω–∏–π: 2,850.2 –º–ª–Ω —Ä—É–±
    Z-score: +2.61
    –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: +57.9%
    
[2] GAZP - –ì–∞–∑–ø—Ä–æ–º
    –û–±–æ—Ä–æ—Ç: 6,200.8 –º–ª–Ω —Ä—É–±
    –°—Ä–µ–¥–Ω–∏–π: 4,100.5 –º–ª–Ω —Ä—É–±
    Z-score: +2.82
    –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: +51.2%

...

===============================================
–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- –í—Å–µ–≥–æ —Ç–∏–∫–µ—Ä–æ–≤: 287
- –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ: 287
- –ê–Ω–æ–º–∞–ª–∏–π –Ω–∞–π–¥–µ–Ω–æ: 12 (4.2%)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –¥–Ω–µ–π –¥–ª—è –±–∞–∑—ã: 5
===============================================
```

### JSON –æ—Ç—á–µ—Ç (reports/anomalies_2026-01-31.json)
```json
{
  "metadata": {
    "analysis_date": "2026-01-31",
    "base_period_start": "2026-01-26",
    "base_period_end": "2026-01-30",
    "base_period_days": 5,
    "threshold_sigma": 2.0,
    "total_tickers": 287,
    "anomalies_found": 12
  },
  "anomalies": [
    {
      "rank": 1,
      "ticker": "SBER",
      "shortname": "–°–±–µ—Ä–±–∞–Ω–∫",
      "current_value": 4500500000.5,
      "avg_value": 2850200000.3,
      "std_value": 632500000.8,
      "z_score": 2.61,
      "deviation_percent": 57.9
    },
    {
      "rank": 2,
      "ticker": "GAZP",
      "shortname": "–ì–∞–∑–ø—Ä–æ–º",
      "current_value": 6200800000.2,
      "avg_value": 4100500000.1,
      "std_value": 745200000.4,
      "z_score": 2.82,
      "deviation_percent": 51.2
    }
  ],
  "warnings": [
    "–¢–∏–∫–µ—Ä NEWCO: —Ç–æ–ª—å–∫–æ 3 –¥–Ω—è –¥–∞–Ω–Ω—ã—Ö –≤–º–µ—Å—Ç–æ 5"
  ]
}
```

## üîÑ Workflow

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
```bash
# 1. –°–æ–±—Ä–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∑–∞ 60 –¥–Ω–µ–π
python detector.py --init --days 60

# –°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∑–∏—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 60 —Ç–æ—Ä–≥–æ–≤—ã—Ö –¥–Ω–µ–π
# –°–æ—Ö—Ä–∞–Ω–∏—Ç –≤ data/volumes_YYYY-MM-DD.json
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ë—ç–∫—Ç–µ—Å—Ç –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–π –¥–∞—Ç–µ
```bash
# –ê–Ω–∞–ª–∏–∑ –∞–Ω–æ–º–∞–ª–∏–π –Ω–∞ 15 —è–Ω–≤–∞—Ä—è
python detector.py --date 2026-01-15

# –ë–∞–∑–∞: 10-14 —è–Ω–≤–∞—Ä—è (5 –¥–Ω–µ–π)
# –ê–Ω–∞–ª–∏–∑: 15 —è–Ω–≤–∞—Ä—è
# –û—Ç—á–µ—Ç: reports/anomalies_2026-01-15.txt + .json
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∑–∞–ø—É—Å–∫
```bash
# –£—Ç—Ä–æ–º 03.02.2026 –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≤—á–µ—Ä–∞—à–Ω–∏–π –¥–µ–Ω—å
python detector.py --date 2026-02-02

# –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –∑–∞ 02.02 –Ω–µ—Ç ‚Üí –∑–∞–ø—Ä–æ—Å–∏—Ç—å –∏–∑ API
# –ï—Å–ª–∏ –µ—Å—Ç—å –≤ –∫–µ—à–µ ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–µ—à
```

## üõ†Ô∏è –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

```python
def main(target_date):
    # 1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç
    base_start = target_date - 5 days
    base_end = target_date - 1 day
    
    # 2. –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
    base_data = []
    for date in range(base_start, base_end):
        data = load_or_fetch(date)  # –ò–∑ –∫–µ—à–∞ –∏–ª–∏ API
        base_data.append(data)
    
    target_data = load_or_fetch(target_date)
    
    # 3. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
    aggregated_base = aggregate_by_ticker(base_data)  # –°—É–º–º–∏—Ä–æ–≤–∞—Ç—å –¥—É–±–ª–∏
    aggregated_target = aggregate_by_ticker(target_data)
    
    # 4. –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    stats = {}
    for ticker in aggregated_target:
        if ticker in aggregated_base:
            values = [aggregated_base[ticker][date]['value'] for date in base_dates]
            mean = statistics.mean(values)
            std = statistics.stdev(values) if len(values) > 1 else 0
            
            current = aggregated_target[ticker]['value']
            z_score = (current - mean) / std if std > 0 else 0
            
            stats[ticker] = {
                'mean': mean,
                'std': std,
                'current': current,
                'z_score': z_score
            }
    
    # 5. –ù–∞–π—Ç–∏ –∞–Ω–æ–º–∞–ª–∏–∏
    anomalies = [
        ticker for ticker, stat in stats.items()
        if stat['z_score'] > ANOMALY_THRESHOLD_SIGMA
    ]
    
    # 6. –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç—ã
    generate_txt_report(anomalies, target_date)
    generate_json_report(anomalies, target_date)
    
    return anomalies
```

## ‚ùì –û–°–¢–ê–í–®–ò–ï–°–Ø –í–û–ü–†–û–°–´

### –í–û–ü–†–û–° 1: –£—á–µ—Ç —Ç–æ—Ä–≥–æ–≤—ã—Ö –¥–Ω–µ–π
–ü—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ "5 –¥–Ω–µ–π –Ω–∞–∑–∞–¥" —É—á–∏—Ç—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —Ç–æ—Ä–≥–æ–≤—ã–µ –¥–Ω–∏ –∏–ª–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–µ?

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –ö–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–µ –¥–Ω–∏**
```
–¶–µ–ª–µ–≤–∞—è –¥–∞—Ç–∞: 31 —è–Ω–≤–∞—Ä—è (–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫)
–ë–∞–∑–∞: 26-30 —è–Ω–≤–∞—Ä—è (–º–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å –≤—ã—Ö–æ–¥–Ω—ã–µ)
```

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –¢–æ—Ä–≥–æ–≤—ã–µ –¥–Ω–∏**
```
–¶–µ–ª–µ–≤–∞—è –¥–∞—Ç–∞: 31 —è–Ω–≤–∞—Ä—è (–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫)
–ë–∞–∑–∞: –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –¢–û–†–ì–û–í–´–• –¥–Ω–µ–π (–ø—Ä–æ–ø—É—Å–∫–∞–µ–º –≤—ã—Ö–æ–¥–Ω—ã–µ)
```

**–ú–û–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:** –í–∞—Ä–∏–∞–Ω—Ç –ë (—Ç–æ—Ä–≥–æ–≤—ã–µ –¥–Ω–∏), –∏–Ω–∞—á–µ –±–∞–∑–∞ –±—É–¥–µ—Ç –Ω–µ–ø–æ–ª–Ω–æ–π

---

### –í–û–ü–†–û–° 2: –†–∞—Å—á–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
–ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –∑–∞ 5 –¥–Ω–µ–π —É —Ç–∏–∫–µ—Ä–∞ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ 1-2 –¥–Ω—è?

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–∏–∫–µ—Ä**
```python
if len(values) < 2:
    skip_ticker()  # –ù–µ–ª—å–∑—è –≤—ã—á–∏—Å–ª–∏—Ç—å stdev
```

**–í–∞—Ä–∏–∞–Ω—Ç –ë: Z-score = 0**
```python
if len(values) < 2:
    z_score = 0  # –°—á–∏—Ç–∞–µ–º, —á—Ç–æ –Ω–µ—Ç –∞–Ω–æ–º–∞–ª–∏–∏
```

**–í–∞—Ä–∏–∞–Ω—Ç –í: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á—Ç–æ –µ—Å—Ç—å**
```python
if len(values) == 1:
    z_score = (current - values[0]) / values[0]  # –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
```

**–ú–û–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:** –í–∞—Ä–∏–∞–Ω—Ç –í —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –≤ –æ—Ç—á–µ—Ç–µ

---

### –í–û–ü–†–û–° 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–µ—à–∞
–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—É—Å–∫–µ —Å —Ç–æ–π –∂–µ –¥–∞—Ç–æ–π:

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–µ—à**
```python
if file_exists(f"data/volumes_{date}.json"):
    return load_from_cache()
```

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –í—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å**
```python
# –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–µ—à, –∑–∞–ø—Ä–æ—Å–∏—Ç—å —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ
data = fetch_from_api(date)
save_to_cache(data)
```

**–í–∞—Ä–∏–∞–Ω—Ç –í: –ü–∞—Ä–∞–º–µ—Ç—Ä --force**
```bash
python detector.py --date 2026-01-31 --force  # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```

**–ú–û–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:** –í–∞—Ä–∏–∞–Ω—Ç –ê (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–µ—à) + –í–∞—Ä–∏–∞–Ω—Ç –í (–ø–∞—Ä–∞–º–µ—Ç—Ä --force)

---

### –í–û–ü–†–û–° 4: –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≤ –æ—Ç—á–µ—Ç–µ
–í –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –≤—ã–≤–æ–¥–∏—Ç—å –∞–Ω–æ–º–∞–ª–∏–∏?

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**
- –ü–æ Z-score (–æ—Ç –±–æ–ª—å—à–µ–≥–æ –∫ –º–µ–Ω—å—à–µ–º—É) 
- –ü–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ–º—É –æ–±–æ—Ä–æ—Ç—É VALUE
- –ü–æ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–º—É –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—é
- –ê–ª—Ñ–∞–≤–∏—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫

**–ú–û–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:** –ü–æ Z-score (—Å–∞–º—ã–µ —Å–∏–ª—å–Ω—ã–µ –∞–Ω–æ–º–∞–ª–∏–∏ –ø–µ—Ä–≤—ã–º–∏)

---

### –í–û–ü–†–û–° 5: –§–æ—Ä–º–∞—Ç –¥–∞—Ç –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
–ö–∞–∫–æ–π —Ñ–æ—Ä–º–∞—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å?

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**
```bash
python detector.py --date 2026-01-31        # ISO —Ñ–æ—Ä–º–∞—Ç
python detector.py --date 31.01.2026        # –†—É—Å—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç
python detector.py --date yesterday         # –ü—Å–µ–≤–¥–æ–Ω–∏–º
python detector.py --date today             # –ü—Å–µ–≤–¥–æ–Ω–∏–º
python detector.py                          # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é = yesterday
```

**–ú–û–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:** –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å ISO —Ñ–æ—Ä–º–∞—Ç + yesterday/today + –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ = yesterday

---

### –í–û–ü–†–û–° 6: –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥—É–±–ª–µ–π
–ö–∞–∫ —Ç–æ—á–Ω–æ —Å—É–º–º–∏—Ä–æ–≤–∞—Ç—å —Ç–∏–∫–µ—Ä—ã —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ä–µ–∂–∏–º–∞–º–∏ —Ç–æ—Ä–≥–æ–≤?

**–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:**
```json
[
  ["AFKS", "–°–∏—Å—Ç–µ–º–∞ –∞–æ", 5, 67.79, 4],
  ["AFKS", "–°–∏—Å—Ç–µ–º–∞ –∞–æ", 61938900, 840184793.1, 22253]
]
```

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –°—É–º–º–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–æ–ª—è**
```python
result['AFKS'] = {
    'volume': 5 + 61938900,
    'value': 67.79 + 840184793.1,  # ‚Üê –≠—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º
    'numtrades': 4 + 22253
}
```

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –¢–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–∂–∏–º (TQBR)**
```python
# –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ boardid='TQBR'
```

**–ú–û–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:** –í–∞—Ä–∏–∞–Ω—Ç –ê (—Å—É–º–º–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë)

---

## üéØ –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π

- [x] –ü–µ—Ä–∏–æ–¥ –±–∞–∑—ã: 5 –¥–Ω–µ–π
- [x] –ú–µ—Ç—Ä–∏–∫–∞: VALUE (—Ä—É–±–ª–∏)
- [x] –ü–æ—Ä–æ–≥: 2.0œÉ (–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è)
- [x] –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: —Ç–æ–ª—å–∫–æ —Ä–æ—Å—Ç
- [x] –§–∏–ª—å—Ç—Ä—ã: –Ω–µ—Ç
- [x] –§–æ—Ä–º–∞—Ç: TXT + JSON
- [x] –•—Ä–∞–Ω–µ–Ω–∏–µ: JSON —Ñ–∞–π–ª—ã –ø–æ –¥–∞—Ç–∞–º
- [x] –û—à–∏–±–∫–∏: 5 —Ä–µ—Ç—Ä–∞–µ–≤, –ø–æ—Ç–æ–º —Å—Ç–æ–ø
- [x] –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: –º–∏–Ω–∏–º—É–º (requests)
- [ ] **–¢–æ—Ä–≥–æ–≤—ã–µ vs –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–µ –¥–Ω–∏?**
- [ ] **–†–∞—Å—á–µ—Ç stdev –¥–ª—è –º–∞–ª–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–Ω–µ–π?**
- [ ] **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–µ—à–∞?**
- [ ] **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ—Ç—á–µ—Ç–∞?**
- [ ] **–§–æ—Ä–º–∞—Ç –¥–∞—Ç CLI?**
- [ ] **–ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥—É–±–ª–µ–π - —Å—É–º–º–∏—Ä–æ–≤–∞—Ç—å?**

## ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

**–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ 6 –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –≤–æ–ø—Ä–æ—Å–æ–≤** –∏–ª–∏ —Å–æ–≥–ª–∞—Å–∏—Ç–µ—Å—å —Å –º–æ–∏–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏:
1. –¢–æ—Ä–≥–æ–≤—ã–µ –¥–Ω–∏ ‚úÖ
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á—Ç–æ –µ—Å—Ç—å —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º ‚úÖ
3. –ö–µ—à + --force ‚úÖ
4. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ Z-score ‚úÖ
5. ISO + yesterday/today ‚úÖ
6. –°—É–º–º–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë ‚úÖ

–ï—Å–ª–∏ —Å–æ–≥–ª–∞—Å–Ω—ã, –ø–∏—à—É: **"–°–æ–≥–ª–∞—Å–µ–Ω —Å–æ –≤—Å–µ–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏"** –∏ —è –Ω–∞—á–Ω—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É!
